(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{150:function(e,t){},221:function(e,t,n){},222:function(e,t,n){},250:function(e,t){},252:function(e,t){},263:function(e,t){},265:function(e,t){},292:function(e,t){},293:function(e,t){},299:function(e,t){},318:function(e,t){},364:function(e,t,n){"use strict";n.r(t);n(221);var s=n(68),r=n(0),c=n(45),a=n(18),i=(n(222),n(1)),o=n.n(i),l=n(404),u=n(402),p=n(209),d=n.n(p),f=n(28),b=n(17),j=o.a.createContext({getProfileFB:function(){return Promise.resolve({isSuccessful:!1})},setProfileFB:function(){return Promise.resolve({isSuccessful:!1})},getAllProfilesFB:function(){return Promise.resolve({isSuccessful:!1})}}),h="https://network2-backend.herokuapp.com",m=function(e){var t=e.children,n=Object(i.useCallback)(function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/users/profile/".concat(t),{method:"GET"});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),s=Object(i.useCallback)(function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/users/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:t})});case 2:if(!(n=e.sent).ok){e.next=5;break}return e.abrupt("return",{isSuccessful:!0});case 5:return e.abrupt("return",{isSuccessful:!1,message:n.statusText});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),a=Object(i.useCallback)(Object(c.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/users/allProfiles",{method:"GET"});case 2:if(!(t=e.sent).ok){e.next=7;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),[]);return Object(b.jsx)(j.Provider,{value:{getProfileFB:n,setProfileFB:s,getAllProfilesFB:a},children:t})},O=n(405),_=(n(355),n(213)),x=new f.i({name:"Beacon Docs"}),y="localhost"===window.location.hostname?"ws://localhost:8000":"wss://socialapp-tezos-backend.herokuapp.com",g=d()(y,{transports:["websocket"]}),v=Object(O.a)();var k=function(){var e=Object(i.useState)(),t=Object(a.a)(e,2),n=t[0],p=t[1],d=Object(i.useState)("sync"),f=Object(a.a)(d,2),h=(f[0],f[1]),m=Object(i.useState)(!1),O=Object(a.a)(m,2),y=(O[0],O[1]),k=Object(i.useState)(),A=Object(a.a)(k,2),C=A[0],P=A[1],z=Object(i.useState)(-1),T=Object(a.a)(z,2),F=T[0],B=T[1],q=Object(i.useState)(),E=Object(a.a)(q,2),I=E[0],J=E[1],D=Object(i.useState)(""),G=Object(a.a)(D,2),L=(G[0],G[1]),N=o.a.useState(""),K=Object(a.a)(N,2),M=(K[0],K[1],Object(i.useContext)(j)),W=(M.getProfileFB,M.setProfileFB),R=M.getAllProfilesFB,U=Object(i.useState)([]),$=Object(a.a)(U,2),Q=$[0],X=$[1],Y=Object(i.useState)([]),Z=Object(a.a)(Y,2),H=Z[0],V=Z[1],ee=Object(i.useState)(),te=Object(a.a)(ee,2),ne=te[0],se=te[1],re=o.a.useState("Anon"),ce=Object(a.a)(re,2),ae=ce[0],ie=ce[1],oe=Object(i.useState)({emoji:ne,timestamp:Date.now(),key:v,username:""}),le=Object(a.a)(oe,2),ue=le[0];function pe(){if(n){var e=Date.now();g.emit("profile",Object(s.a)(Object(s.a)({},ue),{},{emoji:ne,key:n.address,username:ae,timestamp:e})),W(Object(s.a)(Object(s.a)({},ue),{},{emoji:ne,key:n.address,username:ae,timestamp:e})),V(H.concat([Object(s.a)(Object(s.a)({},ue),{},{emoji:ne,key:n.address,username:ae,timestamp:e})]).sort((function(e,t){return parseFloat(t.timestamp)-parseFloat(e.timestamp)}))),ie("")}else fe()}function de(){return(de=Object(c.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,x.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),n&&x.clearActiveAccount().then(Object(c.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,x.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),h("sync"),y(!1);case 7:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return be.apply(this,arguments)}function be(){return(be=Object(c.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,x.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=11;break}return h(n.address),y(!0),e.abrupt("return",n);case 11:return e.prev=11,console.log("Requesting permissions..."),e.next=15,x.requestPermissions();case 15:return t=e.sent,e.t2=p,e.next=19,x.getActiveAccount();case 19:e.t3=e.sent,(0,e.t2)(e.t3),console.log("Got permissions:",t.address),h(t.address),y(!0),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(11),console.log("Got error:",e.t4);case 29:case"end":return e.stop()}}),e,null,[[11,26]])})))).apply(this,arguments)}function je(e){if(I&&I.length>0){var t=I[e%(I.length-1)].display_uri;if(t)return t.replace("ipfs://","https://ipfs.io/ipfs/")}}return le[1],Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:t=e.sent,console.log("result"),console.log(t),X(t.history);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[R]),Object(i.useEffect)((function(){if(C&&C.length>0&&Q&&Q.length>0){var e=H.concat(Q);(e=e.concat(C)).sort((function(e,t){return e.timestamp-t.timestamp})),e.reverse(),console.log(e),V(e)}}),[Q,C]),Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,x.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),n?(h(n.address.slice(0,6)+"..."+n.address.slice(32,36)),y(!0)):(h("sync"),y(!1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(i.useEffect)((function(){function e(e){var t=Date.parse(e.minted_at);return e.timestamp=t,e}function t(){return(t=Object(c.a)(Object(r.a)().mark((function t(n){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://unstable-do-not-use-in-production-api.teztok.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n,variables:{}})}).then((function(e){return e.json()})).then((function(t){if(console.log(t),t.data&&t.data.tokens){var n=t.data.tokens.map((function(t){return e(t)}));console.log(n),P(t.data.tokens)}}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(w)}),[]),Object(i.useEffect)((function(){function e(e){return Math.floor(Math.random()*e)}function t(){return(t=Object(c.a)(Object(r.a)().mark((function t(s){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://unstable-do-not-use-in-production-api.teztok.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:s,variables:{address:n?n.address:""}})}).then((function(e){return e.json()})).then((function(t){var n;if(console.log(t),t.data&&t.data.tokens&&J(t.data.tokens),t.data.tokens.length>0){var s=e(t.data.tokens.length);n=t.data.tokens[s].display_uri}n&&L(n.replace("ipfs://","https://ipfs.io/ipfs/"))}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(S)}),[n]),Object(b.jsxs)("div",{children:[Object(b.jsxs)(l.a,{size:"small",onClick:function(){n?function(){de.apply(this,arguments)}():fe()},children:[" ",n?Object(b.jsx)("u",{children:"unsync"}):Object(b.jsx)("u",{children:"sync"})," "]}),Object(b.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(b.jsxs)("div",{style:{width:"56.25vw"},children:[Object(b.jsx)("div",{style:{textAlign:"center",fontSize:"1.2em",marginTop:10},children:"Typed Art"}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{style:{width:"90%",marginLeft:"auto",marginRight:"auto"},children:[Object(b.jsx)(_.a,{title:"Pick your emoji",emoji:"point_up",onSelect:function(e){console.log(e),se(e.native)}}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(b.jsx)(u.a,{id:"outlined-basic",size:"small",label:"info",variant:"outlined",placeholder:"Status",onChange:function(e){e.target.value.length<25?ie(e.target.value):ie(e.target.value.slice(0,25))},value:ae,onKeyPress:function(e){"Enter"===e.key&&pe()}}),Object(b.jsx)("div",{style:{width:50,height:30,border:"solid 4px ",marginInline:4},children:Object(b.jsx)("div",{style:{textAlign:"center",fontSize:"1.4em"},children:ne})}),Object(b.jsxs)(l.a,{size:"small",title:"update status",onClick:function(){pe()},children:[" ",n?Object(b.jsx)("u",{children:"update status"}):Object(b.jsx)("u",{children:"sync to join network1"})," "]})]})]}),H&&H.map((function(e,t){return e.name?Object(b.jsx)("div",{style:{padding:80,backgroundImage:"url(".concat(je(t),")")},children:Object(b.jsxs)("div",{style:{marginBlock:20,padding:2,backgroundColor:"white"},children:[Object(b.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:Object(b.jsxs)(l.a,{size:"small",onClick:function(){window.open("https://typed.art/".concat(e.token_id),"_blank")},style:{color:"black"},children:[e.token_id,"#"]})}),Object(b.jsx)("p",{style:{whiteSpace:"pre-wrap",WebkitLineClamp:F===t?50:8,WebkitBoxOrient:"vertical",display:"-webkit-box",overflowWrap:"break-word",overflow:"hidden"},children:e.description}),Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[e.description&&e.description.split(/\r\n|\r|\n/).length>8&&Object(b.jsx)(l.a,{size:"small",onClick:function(){B(t)},style:{color:"black"},children:F!==t?"more":"less"}),Object(b.jsx)("div",{style:{marginLeft:"auto"},children:Object(b.jsx)(l.a,{size:"small",onClick:function(){window.open("https://assemblr.xyz/?profile=".concat(e.creators[0]),"_blank")},style:{color:"black"},children:e.creators[0]&&e.creators[0].slice(0,10)+"..."+e.creators[0].slice(28,36)})})]})]})},t):Object(b.jsxs)("div",{style:{textAlign:"center",marginInline:6},children:[Object(b.jsx)("div",{style:{width:100,height:30,border:"solid 4px ",marginInline:4},children:Object(b.jsx)("div",{style:{textAlign:"center",fontSize:"1.4em"},children:e.emoji})}),Object(b.jsxs)(l.a,{title:e.key,size:"small",onClick:Object(c.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.open("https://adventurepizza.github.io/Assemble/?profile="+e.key);case 1:case"end":return t.stop()}}),t)}))),children:[e.username," "]})]},e.timestamp)}))]})})]})},w='\nquery MyQuery {\n  tokens(where: {fa2_address: {_eq: "KT1J6NY5AU61GzUX51n59wwiZcGJ9DrNTwbK"}}, order_by: {minted_at: desc}, limit: 300) {\n    name\n    fa2_address\n    token_id\n    description\n    creators\n    minted_at\n  }\n}\n\n\n',S='\nquery ownedTokens ($address: String) {\n    tokens(where: {holdings: {holder_address: {_eq: $address}, amount: {_gt: "0"}}}) {\n      artifact_metadata\n      artifact_uri\n      artist_address\n      assets\n      attributes\n      burned_editions\n      contributors\n      creators\n      current_price_to_first_sales_price_diff\n      current_price_to_first_sales_price_pct\n      current_price_to_highest_sales_price_diff\n      current_price_to_highest_sales_price_pct\n      current_price_to_last_sales_price_diff\n      current_price_to_last_sales_price_pct\n      current_price_to_lowest_sales_price_diff\n      current_price_to_lowest_sales_price_pct\n      description\n      display_uri\n      editions\n      eightbid_creator_name\n      eightbid_rgb\n      external_uri\n      fa2_address\n      first_sales_price\n      formats\n      fx_issuer_id\n      fx_iteration\n      highest_offer_price\n      highest_sales_price\n      last_processed_event_id\n      last_processed_event_level\n      last_processed_event_timestamp\n      last_sale_at\n      last_sales_price\n      lowest_sales_price\n      metadata_uri\n      mime_type\n      mint_price\n      minted_at\n      minter_address\n      name\n      objkt_artist_collection_id\n      platform\n      price\n      right_uri\n      rights\n      royalties\n      royalties_total\n      sales_count\n      sales_volume\n      symbol\n      thumbnail_uri\n      token_id\n    }\n  }\n  \n',A=n(26),C=n.n(A),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,407)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))},z=n(215);C.a.render(Object(b.jsx)(m,{children:Object(b.jsx)(z.a,{maxSnack:3,children:Object(b.jsx)(k,{})})}),document.getElementById("root")),P()}},[[364,1,2]]]);
//# sourceMappingURL=main.44acd86b.chunk.js.map