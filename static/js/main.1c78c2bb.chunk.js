(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{152:function(e,t){},226:function(e,t,n){},227:function(e,t,n){},255:function(e,t){},257:function(e,t){},268:function(e,t){},270:function(e,t){},297:function(e,t){},298:function(e,t){},304:function(e,t){},323:function(e,t){},369:function(e,t,n){"use strict";n.r(t);n(226);var r=n(44),c=n(0),s=n(37),a=n(16),i=(n(227),n(1)),o=n.n(i),l=n(409),u=n(407),p=n(211),d=n.n(p),b=n(28),f=n(8),j=o.a.createContext({getProfileFB:function(){return Promise.resolve({isSuccessful:!1})},setProfileFB:function(){return Promise.resolve({isSuccessful:!1})},getUnfurl:function(){return Promise.resolve({isSuccessful:!1})},getAllProfilesFB:function(){return Promise.resolve({isSuccessful:!1})}}),h="https://socialapp-tezos-backend.herokuapp.com",O=function(e){var t=e.children,n=Object(i.useCallback)(function(){var e=Object(s.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/users/profile/".concat(t),{method:"GET"});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),r=Object(i.useCallback)(function(){var e=Object(s.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/users/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:t})});case 2:if(!(n=e.sent).ok){e.next=5;break}return e.abrupt("return",{isSuccessful:!0});case 5:return e.abrupt("return",{isSuccessful:!1,message:n.statusText});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),a=Object(i.useCallback)(function(){var e=Object(s.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/users/unfurl",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),o=Object(i.useCallback)(Object(s.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/users/allProfiles",{method:"GET"});case 2:if(!(t=e.sent).ok){e.next=7;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),[]);return Object(f.jsx)(j.Provider,{value:{getProfileFB:n,setProfileFB:r,getAllProfilesFB:o,getUnfurl:a},children:t})},m=n(410),g=(n(360),n(215)),x=n(402),y=n(218),_=n(219),k=function(e){var t=e.url,n=Object(i.useState)(),r=Object(a.a)(n,2),o=r[0],u=r[1],p=Object(i.useContext)(j).getUnfurl,d=Object(i.useState)(),b=Object(a.a)(d,2),h=b[0],O=b[1];return Object(i.useEffect)((function(){function e(){return(e=Object(s.a)(Object(c.a)().mark((function e(){var n,r,s,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:(n=e.sent)&&n.image&&n.image.startsWith("./")&&(r=t.split("/"),n.image=t.replace(r[r.length-1],n.image.slice(2))),t.startsWith("https://twitter.com")&&(s=t.split("/"))&s[5]&&(a=s[5].split("?"),O(a[0])),u(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p,t]),Object(f.jsxs)(x.a,{children:[h&&Object(f.jsx)(_.a,{tweetId:h}),!h&&t&&Object(f.jsxs)(f.Fragment,{children:[o&&!(t.includes("youtube.com")||t.includes("https://youtu.be"))&&o.image&&Object(f.jsxs)("div",{onClick:function(){return window.open(t,"_blank")},children:[Object(f.jsx)("img",{alt:t,src:o.image,width:"100%"}),Object(f.jsx)("h4",{children:o.title}),Object(f.jsx)("p",{children:o.description}),Object(f.jsx)("p",{children:Object(f.jsx)("small",{children:t})})]}),o&&!o.image&&Object(f.jsx)(y.a,{url:t,fallbackImageSrc:"https://www.pngitem.com/pimgs/m/43-430934_magnifying-glass-magnifying-glass-png-icon-transparent-png.png"}),!o&&Object(f.jsx)("div",{children:Object(f.jsxs)(l.a,{size:"small",title:"unsync",onClick:function(){window.open(t,"_blank")},children:[Object(f.jsx)("u",{children:t.length>60?t.slice(0,30)+"..."+t.slice(t.length-31,t.length-1):t})," "]})})]})]})},v=new b.i({name:"Beacon Docs"}),w="localhost"===window.location.hostname?"ws://localhost:8000":"wss://socialapp-tezos-backend.herokuapp.com",S=(d()(w,{transports:["websocket"]}),Object(m.a)());var C=function(){var e=Object(i.useState)(),t=Object(a.a)(e,2),n=t[0],p=t[1],d=Object(i.useState)("sync"),b=Object(a.a)(d,2),h=(b[0],b[1]),O=Object(i.useState)(!1),m=Object(a.a)(O,2),x=(m[0],m[1]),y=Object(i.useState)(),_=Object(a.a)(y,2),w=_[0],C=_[1],z=Object(i.useState)(-1),T=Object(a.a)(z,2),F=T[0],B=T[1],I=Object(i.useState)(),q=Object(a.a)(I,2),E=(q[0],q[1]),J=Object(i.useState)(""),N=Object(a.a)(J,2),D=(N[0],N[1]),G=o.a.useState(""),W=Object(a.a)(G,2),L=W[0],M=W[1],U=o.a.useState(0),K=Object(a.a)(U,2),R=K[0],$=K[1],Q=o.a.useState("\ud83d\udc38"),X=Object(a.a)(Q,2),Y=X[0],Z=X[1],H=Object(i.useContext)(j),V=(H.getProfileFB,H.setProfileFB),ee=H.getAllProfilesFB,te=Object(i.useState)([]),ne=Object(a.a)(te,2),re=ne[0],ce=ne[1],se=Object(i.useState)([]),ae=Object(a.a)(se,2),ie=ae[0],oe=ae[1],le=Object(i.useState)("\ud83d\udc38"),ue=Object(a.a)(le,2),pe=(ue[0],ue[1],o.a.useState("Anon")),de=Object(a.a)(pe,2),be=(de[0],de[1]),fe=Object(i.useState)({attachment:Y,timestamp:Date.now(),key:S,username:""}),je=Object(a.a)(fe,2),he=je[0],Oe=(je[1],Object(i.useState)(!1)),me=Object(a.a)(Oe,2),ge=me[0],xe=me[1],ye=function(e){M(e.target.value);var t=e.target.value,n=t.split("/");console.log(n),"open.spotify.com"===n[2]?(console.log({type:n[3],id:n[4]}),console.log("spotify"),$(1),Z({type:n[3],id:n[4]})):"https:"===n[0]?(console.log("url"),$(2),Z(t)):(console.log("text"),$(0),ge&&$(3))},_e=function(e){"Enter"===e.key&&we()};function ke(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(s.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://unstable-do-not-use-in-production-api.teztok.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:A,variables:{address:t}})}).then((function(e){return e.json()})).then((function(e){if(e&&e.data&&e.data.tokens&&e.data.tokens.length>0){var t=Math.floor(Math.random()*e.data.tokens.length);n=e.data.tokens[t].display_uri}}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return Se.apply(this,arguments)}function Se(){return(Se=Object(s.a)(Object(c.a)().mark((function e(){var t,s,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=13;break}return t=Date.now(),0===R?s="text":1===R?s="network3":2===R?s="url":3===R&&(s="network2"),V(Object(r.a)(Object(r.a)({},he),{},{key:n.address,username:L,timestamp:t,attachment:Y,type:s})),e.next=6,ke(n.address);case 6:a=e.sent,oe(ie.concat([Object(r.a)(Object(r.a)({},he),{},{key:n.address,username:L,timestamp:t,attachment:Y,type:s,bg:a})]).sort((function(e,t){return parseFloat(t.timestamp)-parseFloat(e.timestamp)}))),be(""),M(""),Z(""),e.next=14;break;case 13:Pe();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=Object(s.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,v.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),n&&v.clearActiveAccount().then(Object(s.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,v.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),h("sync"),x(!1);case 7:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(s.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,v.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=11;break}return h(n.address),x(!0),e.abrupt("return",n);case 11:return e.prev=11,console.log("Requesting permissions..."),e.next=15,v.requestPermissions();case 15:return t=e.sent,e.t2=p,e.next=19,v.getActiveAccount();case 19:e.t3=e.sent,(0,e.t2)(e.t3),console.log("Got permissions:",t.address),h(t.address),x(!0),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(11),console.log("Got error:",e.t4);case 29:case"end":return e.stop()}}),e,null,[[11,26]])})))).apply(this,arguments)}function ze(e){if(ie&&ie.length>=e&&ie[e].bg)return ie[e].bg.replace("ipfs://","https://ipfs.io/ipfs/")}return Object(i.useEffect)((function(){function e(){return(e=Object(s.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee();case 2:t=e.sent,console.log("result"),console.log(t),ce(t.history);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[ee]),Object(i.useEffect)((function(){function e(){return(e=Object(s.a)(Object(c.a)().mark((function e(){var t,n,r,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(w&&w.length>0&&re&&re.length>0)){e.next=27;break}(t=(t=ie.concat(re)).concat(w)).sort((function(e,t){return e.timestamp-t.timestamp})),t.reverse(),console.log(t),t=t.slice(0,20),n=0;case 8:if(!(n<t.length)){e.next=25;break}if(!(t[n]&&t[n].creators&&t[n].creators[0])){e.next=16;break}return e.next=12,ke(t[n].creators[0]);case 12:r=e.sent,t[n].bg=r,e.next=22;break;case 16:if(!t[n]||!t[n].key){e.next=22;break}return e.next=19,ke(t[n].key);case 19:s=e.sent,t[n].bg=s,console.log(s);case 22:n++,e.next=8;break;case 25:console.log(t),oe(t);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[re,w]),Object(i.useEffect)((function(){function e(){return(e=Object(s.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,v.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),n?(h(n.address.slice(0,6)+"..."+n.address.slice(32,36)),x(!0)):(h("sync"),x(!1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(i.useEffect)((function(){function e(e){var t=Date.parse(e.minted_at);return e.timestamp=t,e}function t(){return(t=Object(s.a)(Object(c.a)().mark((function t(n){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://unstable-do-not-use-in-production-api.teztok.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n,variables:{}})}).then((function(e){return e.json()})).then((function(t){if(console.log(t),t.data&&t.data.tokens){var n=t.data.tokens.map((function(t){return e(t)}));console.log(n),C(t.data.tokens)}}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(P)}),[]),Object(i.useEffect)((function(){function e(e){return Math.floor(Math.random()*e)}function t(){return(t=Object(s.a)(Object(c.a)().mark((function t(r){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://unstable-do-not-use-in-production-api.teztok.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:r,variables:{address:n?n.address:""}})}).then((function(e){return e.json()})).then((function(t){var n;if(console.log(t),t.data&&t.data.tokens&&E(t.data.tokens),t.data.tokens.length>0){var r=e(t.data.tokens.length);n=t.data.tokens[r].display_uri}n&&D(n.replace("ipfs://","https://ipfs.io/ipfs/"))}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(A)}),[n]),Object(f.jsxs)("div",{children:[Object(f.jsxs)(l.a,{size:"small",onClick:function(){n?function(){Ce.apply(this,arguments)}():Pe()},children:[" ",n?Object(f.jsx)("u",{children:"unsync"}):Object(f.jsx)("u",{children:"sync"})," "]}),Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(f.jsxs)("div",{style:{width:"56.25vw"},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(u.a,{id:"outlined-basic",label:"Add a message here",variant:"outlined",placeholder:"Add a message here",onChange:ye,value:L,onKeyPress:_e,fullWidth:!0}),Object(f.jsx)(l.a,{size:"small",onClick:function(){xe(!1),$(2)},children:"url"}),Object(f.jsx)(l.a,{size:"small",onClick:function(){xe(!1),$(1)},children:"spotify"}),Object(f.jsx)(l.a,{size:"small",onClick:function(){xe(!0),$(3)},children:"emoji"}),Object(f.jsx)("div",{style:{textAlign:"right"},children:Object(f.jsx)(l.a,{size:"small",onClick:function(){we()},variant:"outlined",children:"send"})})]}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:"preview"}),Y&&Y.type&&Object(f.jsx)("iframe",{src:"https://open.spotify.com/embed/".concat(Y.type,"/").concat(Y.id,"?utm_source=generator"),width:"100%",height:"152",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"}),2===R&&Object(f.jsx)(k,{url:Y})]}),ge&&Object(f.jsxs)("div",{style:{width:"90%",marginLeft:"auto",marginRight:"auto"},children:[Object(f.jsx)(g.a,{title:"Pick your emoji",emoji:"point_up",onSelect:function(e){console.log(e),Z(e.native)}}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)(u.a,{id:"outlined-basic",size:"small",label:"info",variant:"outlined",placeholder:"Status",onChange:ye,value:L,onKeyPress:_e}),Object(f.jsx)("div",{style:{width:50,height:30,border:"solid 4px ",marginInline:4},children:Object(f.jsx)("div",{style:{textAlign:"center",fontSize:"1.4em"},children:Y})}),Object(f.jsxs)(l.a,{size:"small",title:"update status",onClick:function(){we()},children:[" ",n?Object(f.jsx)("u",{children:"update status"}):Object(f.jsx)("u",{children:"sync to join network1"})," "]})]})]}),ie&&ie.map((function(e,t){return Object(f.jsxs)(f.Fragment,{children:[e.name&&Object(f.jsx)("div",{style:{padding:300,backgroundImage:"url(".concat(ze(t),")")},children:Object(f.jsxs)("div",{style:{marginBlock:20,padding:2,backgroundColor:"white"},children:[Object(f.jsx)("div",{style:{display:"flex",justifyContent:"right"},children:Object(f.jsxs)(l.a,{size:"small",onClick:function(){window.open("https://typed.art/".concat(e.token_id),"_blank")},style:{color:"black"},children:[e.token_id,"#"]})}),Object(f.jsx)("p",{style:{whiteSpace:"pre-wrap",WebkitLineClamp:F===t?50:8,WebkitBoxOrient:"vertical",display:"-webkit-box",overflowWrap:"break-word",overflow:"hidden"},children:e.description}),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[e.description&&e.description.split(/\r\n|\r|\n/).length>8&&Object(f.jsx)(l.a,{size:"small",onClick:function(){B(t)},style:{color:"black"},children:F!==t?"more":"less"}),Object(f.jsx)("div",{style:{marginLeft:"auto"},children:Object(f.jsx)(l.a,{size:"small",onClick:function(){window.open("https://assemblr.xyz/?profile=".concat(e.creators[0]),"_blank")},style:{color:"black"},children:e.creators[0]&&e.creators[0].slice(0,10)+"..."+e.creators[0].slice(28,36)})})]})]})},t),e&&"network2"===e.type&&Object(f.jsx)("div",{style:{padding:300,backgroundImage:"url(".concat(ze(t),")")},children:Object(f.jsxs)("div",{style:{textAlign:"center",marginInline:6,backgroundColor:"white"},children:[Object(f.jsx)("div",{style:{border:"solid 4px ",marginInline:4,display:"flex",justifyContent:"center"},children:Object(f.jsx)("div",{style:{textAlign:"center",fontSize:"14em",display:"flex",justifyContent:"center"},children:e.attachment})}),Object(f.jsxs)(l.a,{title:e.key,size:"small",onClick:Object(s.a)(Object(c.a)().mark((function t(){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.open("https://adventurepizza.github.io/Assemble/?profile="+e.key);case 1:case"end":return t.stop()}}),t)}))),children:[e.username," "]})]},e.timestamp)},t),e&&"network3"===e.type&&e.attachment&&e.attachment.type&&Object(f.jsx)("div",{style:{padding:300,backgroundImage:"url(".concat(ze(t),")")},children:Object(f.jsx)("iframe",{title:e.timestamp,src:"https://open.spotify.com/embed/".concat(e.attachment.type,"/").concat(e.attachment.id,"?utm_source=generator"),width:"100%",height:"152",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"})},t),e&&"url"===e.type&&Object(f.jsx)("div",{style:{padding:300,backgroundImage:"url(".concat(ze(t),")")},children:Object(f.jsx)(k,{url:e.attachment})},t),e&&"text"===e.type&&Object(f.jsx)("div",{style:{padding:300,backgroundImage:"url(".concat(ze(t),")")},children:Object(f.jsx)("div",{style:{backgroundColor:"white",padding:20},children:e.username})},t)]})}))]})})]})},P='\nquery MyQuery {\n  tokens(where: {fa2_address: {_eq: "KT1J6NY5AU61GzUX51n59wwiZcGJ9DrNTwbK"}}, order_by: {minted_at: desc}, limit: 30) {\n    name\n    fa2_address\n    token_id\n    description\n    creators\n    minted_at\n  }\n}\n\n\n',A='\nquery ownedTokens ($address: String) {\n    tokens(where: {holdings: {holder_address: {_eq: $address}, amount: {_gt: "0"}}}) {\n      artifact_metadata\n      artifact_uri\n      artist_address\n      assets\n      attributes\n      burned_editions\n      contributors\n      creators\n      current_price_to_first_sales_price_diff\n      current_price_to_first_sales_price_pct\n      current_price_to_highest_sales_price_diff\n      current_price_to_highest_sales_price_pct\n      current_price_to_last_sales_price_diff\n      current_price_to_last_sales_price_pct\n      current_price_to_lowest_sales_price_diff\n      current_price_to_lowest_sales_price_pct\n      description\n      display_uri\n      editions\n      eightbid_creator_name\n      eightbid_rgb\n      external_uri\n      fa2_address\n      first_sales_price\n      formats\n      fx_issuer_id\n      fx_iteration\n      highest_offer_price\n      highest_sales_price\n      last_processed_event_id\n      last_processed_event_level\n      last_processed_event_timestamp\n      last_sale_at\n      last_sales_price\n      lowest_sales_price\n      metadata_uri\n      mime_type\n      mint_price\n      minted_at\n      minter_address\n      name\n      objkt_artist_collection_id\n      platform\n      price\n      right_uri\n      rights\n      royalties\n      royalties_total\n      sales_count\n      sales_volume\n      symbol\n      thumbnail_uri\n      token_id\n    }\n  }\n  \n',z=n(26),T=n.n(z),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,412)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))},B=n(217);T.a.render(Object(f.jsx)(O,{children:Object(f.jsx)(B.a,{maxSnack:3,children:Object(f.jsx)(C,{})})}),document.getElementById("root")),F()}},[[369,1,2]]]);
//# sourceMappingURL=main.1c78c2bb.chunk.js.map